' DIAGRAM #########################################
' Negotiation phase messaging
' #################################################
@startuml
' #################################################
' SETTINGS: color settings of diagram
' #################################################
skinparam sequence {
	BorderColor black
	ArrowColor black
	ActorBorderColor black
	LifeLineBorderColor black
	LifeLineBackgroundColor white
	
	ParticipantBorderColor black
	ParticipantBackgroundColor white
	ParticipantFontColor black
	
	ActorBackgroundColor white
	ActorFontColor black
}
' #################################################
' ACTORS
' #################################################
actor Maker as M
' participant "app\nMaker" as TM
' participant "Social\nMedia" as I
' participant "app\nTaker" as TT
actor Taker as T

' allow parallelism
!pragma teoz true

' #################################################
' DIAGRAM
' #################################################
group negotiation phase
    T->M: offer request (from invite)
    M->T: current offer
    T->T: decision to take offer
    T->M: take offer
    alt
        M->T: Acknowledge
    else some kind of failure
        M->T: \nmissing param,\noffer outdated,\nexpiries not accepted
        note right #white
            taker could send
            another offer request
        end note
    end
    T->T: default to role of Alice
    & M->M: default to role of Bob
end

@enduml
